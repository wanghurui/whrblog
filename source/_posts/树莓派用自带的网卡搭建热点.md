---
title: 树莓派用自带的网卡搭建热点
tags:
  - IT
  - Linux
  - Raspi/Orapi
id: '85'
categories:
  - - uncategorized
date: 2018-02-17 16:45:20
---

主要用到的软件有hostapd、dnsmasq
<!-- more -->
`sudo apt-get install hostapd dnsmasq` 然后在/etc/dnsmasq.conf末加入（自己修改IP和网段，这个文件是已存在的，很详细的配置文件，但是所有行都加入了#号注释掉） `interface=wlan0 dhcp-range=10.0.0.2,10.0.0.5,12h` 然后新建/etc/hostapd/hostapd.conf，加入 `interface=wlan0 hw_mode=g channel=10 auth_algs=1 wpa=2 wpa_key_mgmt=WPA-PSK wpa_pairwise=CCMP rsn_pairwise=CCMP wpa_passphrase=wifi密码 ssid=wifi名字` 接着修改/etc/sysctl.conf，更改（如果有这一行，把#号去掉就行） `net.ipv4.ip_forward=1` 最后，将下面脚本加入到/etc/rc.local的exit 0前 `ifconfig wlan0 down ifconfig wlan0 10.0.0.1 netmask 255.255.255.0 up iwconfig wlan0 power off service dnsmasq restart hostapd -B /etc/hostapd/hostapd.conf & > /dev/null 2>&1 sudo iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE sudo iptables -A FORWARD -i eth0 -o wlan0 -m state --state RELATED,ESTABLISHED -j ACCEPT sudo iptables -A FORWARD -i wlan0 -o eth0 -j ACCEPT` 重启，就可以看到热点了。 转自[周半仙的博客](http://zhoubanxian.cn)