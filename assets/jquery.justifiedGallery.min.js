/*!
 * justifiedGallery - v3.8.0
 * http://miromannino.github.io/Justified-Gallery/
 * Copyright (c) 2020 Miro Mannino
 * Licensed under the MIT license.
 */

!function(e){"function"==typeof define&amp;&amp;define.amd?define(["jquery"],e):"object"==typeof module&amp;&amp;module.exports?module.exports=function(t,i){return void 0===i&amp;&amp;(i="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(i),i}:e(jQuery)}(function(l){var r=function(t,i){this.settings=i,this.checkSettings(),this.imgAnalyzerTimeout=null,this.entries=null,this.buildingRow={entriesBuff:[],width:0,height:0,aspectRatio:0},this.lastFetchedEntry=null,this.lastAnalyzedIndex=-1,this.yield={every:2,flushed:0},this.border=0&lt;=i.border?i.border:i.margins,this.maxRowHeight=this.retrieveMaxRowHeight(),this.suffixRanges=this.retrieveSuffixRanges(),this.offY=this.border,this.rows=0,this.spinner={phase:0,timeSlot:150,$el:l('<div class="jg-spinner"><span></span><span></span><span></span></div>'),intervalId:null},this.scrollBarOn=!1,this.checkWidthIntervalId=null,this.galleryWidth=t.width(),this.$gallery=t};r.prototype.getSuffix=function(t,i){var e,s;for(e=i<t?t:i,s=0;s<this.suffixranges.length;s++)if(e<=this.suffixranges[s])return this.settings.sizerangesuffixes[this.suffixranges[s]];return="" this.settings.sizerangesuffixes[this.suffixranges[s-1]]},r.prototype.removesuffix="function(t,i){return" t.substring(0,t.length-i.length)},r.prototype.endswith="function(t,i){return-1!==t.indexOf(i,t.length-i.length)},r.prototype.getUsedSuffix=function(t){for(var" i="" in="" this.settings.sizerangesuffixes)if(this.settings.sizerangesuffixes.hasownproperty(i)){if(0="==this.settings.sizeRangeSuffixes[i].length)continue;if(this.endsWith(t,this.settings.sizeRangeSuffixes[i]))return" this.settings.sizerangesuffixes[i]}return""},r.prototype.newsrc="function(t,i,e,s){var" n;if(this.settings.thumbnailpath)n="this.settings.thumbnailPath(t,i,e,s);else{var" r="t.match(this.settings.extension),o=null!==r?r[0]:&quot;&quot;;n=t.replace(this.settings.extension,&quot;&quot;),n=this.removeSuffix(n,this.getUsedSuffix(n)),n+=this.getSuffix(i,e)+o}return" n},r.prototype.showimg="function(t,i){this.settings.cssAnimation?(t.addClass(&quot;jg-entry-visible&quot;),i&amp;&amp;i()):(t.stop().fadeTo(this.settings.imagesAnimationDuration,1,i),t.find(this.settings.imgSelector).stop().fadeTo(this.settings.imagesAnimationDuration,1,i))},r.prototype.extractImgSrcFromImage=function(t){var" void="" 0="==i&amp;&amp;(i=t.attr(&quot;src&quot;),e=&quot;src&quot;),t.data(&quot;jg.originalSrc&quot;,i),t.data(&quot;jg.src&quot;,i),t.data(&quot;jg.originalSrcLoc&quot;,e),i},r.prototype.imgFromEntry=function(t){var"> .jg-caption");return 0===i.length?null:i},r.prototype.displayEntry=function(t,i,e,s,n,r){t.width(s),t.height(r),t.css("top",e),t.css("left",i);var o=this.imgFromEntry(t);if(null!==o){o.css("width",s),o.css("height",n),o.css("margin-left",-Math.round(s/2)),o.css("margin-top",-Math.round(n/2));var a=o.data("jg.src");if(a){a=this.newSrc(a,s,n,o[0]),o.one("error",function(){this.resetImgSrc(o)});var h=function(){o.attr("src",a)};"skipped"===t.data("jg.loaded")&amp;&amp;a?this.onImageEvent(a,function(){this.showImg(t,h),t.data("jg.loaded",!0)}.bind(this)):this.showImg(t,h)}}else this.showImg(t);this.displayEntryCaption(t)},r.prototype.displayEntryCaption=function(t){var i=this.imgFromEntry(t);if(null!==i&amp;&amp;this.settings.captions){var e=this.captionFromEntry(t);if(null===e){var s=i.attr("alt");this.isValidCaption(s)||(s=t.attr("title")),this.isValidCaption(s)&amp;&amp;(e=l('<div class="jg-caption">'+s+"</div>"),t.append(e),t.data("jg.createdCaption",!0))}null!==e&amp;&amp;(this.settings.cssAnimation||e.stop().fadeTo(0,this.settings.captionSettings.nonVisibleOpacity),this.addCaptionEventsHandlers(t))}else this.removeCaptionEventsHandlers(t)},r.prototype.isValidCaption=function(t){return void 0!==t&amp;&amp;0<t.length},r.prototype.onentrymouseenterforcaption=function(t){var i="this.captionFromEntry(l(t.currentTarget));this.settings.cssAnimation?i.addClass(&quot;jg-caption-visible&quot;).removeClass(&quot;jg-caption-hidden&quot;):i.stop().fadeTo(this.settings.captionSettings.animationDuration,this.settings.captionSettings.visibleOpacity)},r.prototype.onEntryMouseLeaveForCaption=function(t){var" 0="==i&amp;&amp;(i={mouseenter:l.proxy(this.onEntryMouseEnterForCaption,this),mouseleave:l.proxy(this.onEntryMouseLeaveForCaption,this)},t.on(&quot;mouseenter&quot;,void" 0,void="" 0,i.mouseenter),t.on("mouseleave",void="" 0,i.mouseleave),t.data("jg.captionmouseevents",i))},r.prototype.removecaptioneventshandlers="function(t){var" 0!="=i&amp;&amp;(t.off(&quot;mouseenter&quot;,void" 0,i.mouseenter),t.off("mouseleave",void="" 0,i.mouseleave),t.removedata("jg.captionmouseevents"))},r.prototype.clearbuildingrow="function(){this.buildingRow.entriesBuff=[],this.buildingRow.aspectRatio=0,this.buildingRow.width=0},r.prototype.prepareBuildingRow=function(t,i){var" e,s,n,r,o,a="!0,h=0,g=this.galleryWidth-2*this.border-(this.buildingRow.entriesBuff.length-1)*this.settings.margins,l=g/this.buildingRow.aspectRatio,u=this.settings.rowHeight,d=this.buildingRow.width/g">this.settings.justifyThreshold;if(i||t&amp;&amp;"hide"===this.settings.lastRow&amp;&amp;!d){for(e=0;e<this.buildingrow.entriesbuff.length;e++)s=this.buildingrow.entriesbuff[e],this.settings.cssanimation?s.removeclass("jg-entry-visible"):(s.stop().fadeto(0,.1),s.find("> img, &gt; a &gt; img").fadeTo(0,0));return-1}for(t&amp;&amp;!d&amp;&amp;"justify"!==this.settings.lastRow&amp;&amp;"hide"!==this.settings.lastRow&amp;&amp;(a=!1,0<this.rows&&(a=(u=(this.offy-this.border-this.settings.margins*this.rows) this.rows)*this.buildingrow.aspectratio="" g="">this.settings.justifyThreshold)),e=0;e<this.buildingrow.entriesbuff.length;e++)n=(s=this.buildingrow.entriesbuff[e]).data("jg.width") s.data("jg.height"),o="a?(r=e===this.buildingRow.entriesBuff.length-1?g:l*n,l):(r=u*n,u),g-=Math.round(r),s.data(&quot;jg.jwidth&quot;,Math.round(r)),s.data(&quot;jg.jheight&quot;,Math.ceil(o)),(0===e||o<h)&amp;&amp;(h=o);return" this.buildingrow.height="h,a},r.prototype.flushRow=function(t,i){var" e,s,n,r="this.settings,o=this.border;if(s=this.prepareBuildingRow(t,i),i||t&amp;&amp;&quot;hide&quot;===r.lastRow&amp;&amp;-1===s)this.clearBuildingRow();else{if(this.maxRowHeight&amp;&amp;this.maxRowHeight<this.buildingRow.height&amp;&amp;(this.buildingRow.height=this.maxRowHeight),t&amp;&amp;(&quot;center&quot;===r.lastRow||&quot;right&quot;===r.lastRow)){var" a="this.galleryWidth-2*this.border-(this.buildingRow.entriesBuff.length-1)*r.margins;for(n=0;n<this.buildingRow.entriesBuff.length;n++)a-=(e=this.buildingRow.entriesBuff[n]).data(&quot;jg.jwidth&quot;);&quot;center&quot;===r.lastRow?o+=Math.round(a/2):&quot;right&quot;===r.lastRow&amp;&amp;(o+=a)}var" h="this.buildingRow.entriesBuff.length-1;for(n=0;n<=h;n++)e=this.buildingRow.entriesBuff[this.settings.rtl?h-n:n],this.displayEntry(e,o,this.offY,e.data(&quot;jg.jwidth&quot;),e.data(&quot;jg.jheight&quot;),this.buildingRow.height),o+=e.data(&quot;jg.jwidth&quot;)+r.margins;this.galleryHeightToSet=this.offY+this.buildingRow.height+this.border,this.setGalleryTempHeight(this.galleryHeightToSet+this.getSpinnerHeight()),(!t||this.buildingRow.height<=r.rowHeight&amp;&amp;s)&amp;&amp;(this.offY+=this.buildingRow.height+r.margins,this.rows+=1,this.clearBuildingRow(),this.settings.triggerEvent.call(this,&quot;jg.rowflush&quot;))}};var" i="0;r.prototype.rememberGalleryHeight=function(){i=this.$gallery.height(),this.$gallery.height(i)},r.prototype.setGalleryTempHeight=function(t){i=Math.max(t,i),this.$gallery.height(i)},r.prototype.setGalleryFinalHeight=function(t){i=t,this.$gallery.height(t)},r.prototype.checkWidth=function(){this.checkWidthIntervalId=setInterval(l.proxy(function(){if(this.$gallery.is(&quot;:visible&quot;)){var" t="parseFloat(this.$gallery.width());Math.abs(t-this.galleryWidth)">this.settings.refreshSensitivity&amp;&amp;(this.galleryWidth=t,this.rewind(),this.rememberGalleryHeight(),this.startImgAnalyzer(!0))}},this),this.settings.refreshTime)},r.prototype.isSpinnerActive=function(){return null!==this.spinner.intervalId},r.prototype.getSpinnerHeight=function(){return this.spinner.$el.innerHeight()},r.prototype.stopLoadingSpinnerAnimation=function(){clearInterval(this.spinner.intervalId),this.spinner.intervalId=null,this.setGalleryTempHeight(this.$gallery.height()-this.getSpinnerHeight()),this.spinner.$el.detach()},r.prototype.startLoadingSpinnerAnimation=function(){var t=this.spinner,i=t.$el.find("span");clearInterval(t.intervalId),this.$gallery.append(t.$el),this.setGalleryTempHeight(this.offY+this.buildingRow.height+this.getSpinnerHeight()),t.intervalId=setInterval(function(){t.phase<i.length?i.eq(t.phase).fadeto(t.timeslot,1):i.eq(t.phase-i.length).fadeto(t.timeslot,0),t.phase=(t.phase+1)%(2*i.length)},t.timeslot)},r.prototype.rewind=function(){this.lastfetchedentry=null,this.lastanalyzedindex=-1,this.offy=this.border,this.rows=0,this.clearbuildingrow()},r.prototype.getselectorwithoutspinner=function(){return this.settings.selector+",="" div:not(.jg-spinner)"},r.prototype.getallentries="function(){var" t="this.getSelectorWithoutSpinner();return" this.$gallery.children(t).toarray()},r.prototype.updateentries="function(t){var" i;if(t&&null!="this.lastFetchedEntry){var" e="this.getSelectorWithoutSpinner();i=l(this.lastFetchedEntry).nextAll(e).toArray()}else" this.entries="[],i=this.getAllEntries();return" 0<i.length&&(l.isfunction(this.settings.sort)?i="this.sortArray(i):this.settings.randomize&amp;&amp;(i=this.shuffleArray(i)),this.lastFetchedEntry=i[i.length-1],this.settings.filter?i=this.filterArray(i):this.resetFilters(i)),this.entries=this.entries.concat(i),!0},r.prototype.insertToGallery=function(t){var" i="this;l.each(t,function(){l(this).appendTo(i.$gallery)})},r.prototype.shuffleArray=function(t){var" i,e,s;for(i="t.length-1;0<i;i--)e=Math.floor(Math.random()*(i+1)),s=t[i],t[i]=t[e],t[e]=s;return" this.inserttogallery(t),t},r.prototype.sortarray="function(t){return" t.sort(this.settings.sort),this.inserttogallery(t),t},r.prototype.resetfilters="function(t){for(var" t.filter(function(t){var="" i.is(e.filter)?(i.removeclass("jg-filtered"),!0):(i.addclass("jg-filtered").removeclass("jg-visible"),!1)});if(l.isfunction(e.filter)){for(var="" i}},r.prototype.resetimgsrc="function(t){&quot;src&quot;===t.data(&quot;jg.originalSrcLoc&quot;)?t.attr(&quot;src&quot;,t.data(&quot;jg.originalSrc&quot;)):t.attr(&quot;src&quot;,&quot;&quot;)},r.prototype.destroy=function(){clearInterval(this.checkWidthIntervalId),this.stopImgAnalyzerStarter(),l.each(this.getAllEntries(),l.proxy(function(t,i){var" 0),e.removeclass("jg-entry="" jg-filtered="" jg-entry-visible");var="" s="this.imgFromEntry(e);s&amp;&amp;(s.css(&quot;width&quot;,&quot;&quot;),s.css(&quot;height&quot;,&quot;&quot;),s.css(&quot;margin-left&quot;,&quot;&quot;),s.css(&quot;margin-top&quot;,&quot;&quot;),this.resetImgSrc(s),s.data(&quot;jg.originalSrc&quot;,void" 0),s.data("jg.originalsrcloc",void="" 0),s.data("jg.src",void="" 0)),this.removecaptioneventshandlers(e);var="" n="this.captionFromEntry(e);e.data(&quot;jg.createdCaption&quot;)?(e.data(&quot;jg.createdCaption&quot;,void" 0),null!="=n&amp;&amp;n.remove()):null!==n&amp;&amp;n.fadeTo(0,1)},this)),this.$gallery.css(&quot;height&quot;,&quot;&quot;),this.$gallery.removeClass(&quot;justified-gallery&quot;),this.$gallery.data(&quot;jg.controller&quot;,void" 0),this.settings.triggerevent.call(this,"jg.destroy")},r.prototype.analyzeimages="function(t){for(var">=this.yield.every))return void this.startImgAnalyzer(t)}else if("error"!==e.data("jg.loaded"))return}0<this.buildingrow.entriesbuff.length&&this.flushrow(!0,0<this.settings.maxrowscount&&this.rows===this.settings.maxrowscount),this.isspinneractive()&&this.stoploadingspinneranimation(),this.stopimganalyzerstarter(),this.setgalleryfinalheight(this.galleryheighttoset),this.settings.triggerevent.call(this,t?"jg.resize":"jg.complete")},r.prototype.stopimganalyzerstarter=function(){this.yield.flushed=0,null!==this.imganalyzertimeout&&(cleartimeout(this.imganalyzertimeout),this.imganalyzertimeout=null)},r.prototype.startimganalyzer=function(t){var i="this;this.stopImgAnalyzerStarter(),this.imgAnalyzerTimeout=setTimeout(function(){i.analyzeImages(t)},.001)},r.prototype.onImageEvent=function(t,i,e){if(i||e){var" s="new" image,n="l(s);i&amp;&amp;n.one(&quot;load&quot;,function(){n.off(&quot;load" error"),i(s)}),e&&n.one("error",function(){n.off("load="" error"),e(s)}),s.src="t}},r.prototype.init=function(){var" a="!1,h=!1,g=this;l.each(this.entries,function(t,i){var" e="l(i),s=g.imgFromEntry(e);if(e.addClass(&quot;jg-entry&quot;),!0!==e.data(&quot;jg.loaded&quot;)&amp;&amp;&quot;skipped&quot;!==e.data(&quot;jg.loaded&quot;))if(null!==g.settings.rel&amp;&amp;e.attr(&quot;rel&quot;,g.settings.rel),null!==g.settings.target&amp;&amp;e.attr(&quot;target&quot;,g.settings.target),null!==s){var" n="g.extractImgSrcFromImage(s);if(!1===g.settings.waitThumbnailsLoad||!n){var" r="parseFloat(s.attr(&quot;width&quot;)),o=parseFloat(s.attr(&quot;height&quot;));if(&quot;svg&quot;===s.prop(&quot;tagName&quot;)&amp;&amp;(r=parseFloat(s[0].getBBox().width),o=parseFloat(s[0].getBBox().height)),!isNaN(r)&amp;&amp;!isNaN(o))return" e.data("jg.width",r),e.data("jg.height",o),e.data("jg.loaded","skipped"),h="!0,g.startImgAnalyzer(!1),!0}e.data(&quot;jg.loaded&quot;,!1),a=!0,g.isSpinnerActive()||g.startLoadingSpinnerAnimation(),g.onImageEvent(n,function(t){e.data(&quot;jg.width&quot;,t.width),e.data(&quot;jg.height&quot;,t.height),e.data(&quot;jg.loaded&quot;,!0),g.startImgAnalyzer(!1)},function(){e.data(&quot;jg.loaded&quot;,&quot;error&quot;),g.startImgAnalyzer(!1)})}else" e.data("jg.loaded",!0),e.data("jg.width",e.width()|parsefloat(e.css("width"))|1),e.data("jg.height",e.height()|parsefloat(e.css("height"))|1)}),a||h||this.startimganalyzer(!1),this.checkwidth()},r.prototype.checkorconvertnumber="function(t,i){if(&quot;string&quot;===l.type(t[i])&amp;&amp;(t[i]=parseFloat(t[i])),&quot;number&quot;!==l.type(t[i]))throw" i+"="" must="" be="" number";if(isnan(t[i]))throw"invalid="" number="" for="" "+i},r.prototype.checksizerangessuffixes="function(){if(&quot;object&quot;!==l.type(this.settings.sizeRangeSuffixes))throw&quot;sizeRangeSuffixes" defined="" and="" an="" object";var="" t="[];for(var" in="" this.settings.sizerangesuffixes)this.settings.sizerangesuffixes.hasownproperty(i)&&t.push(i);for(var="" keys="" contains="" correct="" numbers="" ("+t+")"}else="" e[t[s]]="this.settings.sizeRangeSuffixes[t[s]];this.settings.sizeRangeSuffixes=e},r.prototype.retrieveMaxRowHeight=function(){var" null;throw"maxrowheight="" or="" percentage"}t="this.settings.maxRowHeight}if(isNaN(t))throw&quot;invalid" maxrowheight";return="" t<i&&(t="i),t},r.prototype.checkSettings=function(){this.checkSizeRangesSuffixes(),this.checkOrConvertNumber(this.settings,&quot;rowHeight&quot;),this.checkOrConvertNumber(this.settings,&quot;margins&quot;),this.checkOrConvertNumber(this.settings,&quot;border&quot;),this.checkOrConvertNumber(this.settings,&quot;maxRowsCount&quot;);var" one="" of:="" "+t.join(",="" ");if(this.checkorconvertnumber(this.settings,"justifythreshold"),this.settings.justifythreshold<0||1<this.settings.justifythreshold)throw"justifythreshold="" the="" interval="" [0,1]";if("boolean"!="=l.type(this.settings.cssAnimation))throw&quot;cssAnimation" boolean";if("boolean"!="=l.type(this.settings.captions))throw&quot;captions" boolean";if(this.checkorconvertnumber(this.settings.captionsettings,"animationduration"),this.checkorconvertnumber(this.settings.captionsettings,"visibleopacity"),this.settings.captionsettings.visibleopacity<0||1<this.settings.captionsettings.visibleopacity)throw"captionsettings.visibleopacity="" [0,="" 1]";if(this.checkorconvertnumber(this.settings.captionsettings,"nonvisibleopacity"),this.settings.captionsettings.nonvisibleopacity<0||1<this.settings.captionsettings.nonvisibleopacity)throw"captionsettings.nonvisibleopacity="" 1]";if(this.checkorconvertnumber(this.settings,"imagesanimationduration"),this.checkorconvertnumber(this.settings,"refreshtime"),this.checkorconvertnumber(this.settings,"refreshsensitivity"),"boolean"!="=l.type(this.settings.randomize))throw&quot;randomize" boolean";if("string"!="=l.type(this.settings.selector))throw&quot;selector" string";if(!1!="=this.settings.sort&amp;&amp;!l.isFunction(this.settings.sort))throw&quot;sort" false="" comparison="" function";if(!1!="=this.settings.filter&amp;&amp;!l.isFunction(this.settings.filter)&amp;&amp;&quot;string&quot;!==l.type(this.settings.filter))throw&quot;filter" false,="" string="" filter="" function"},r.prototype.retrievesuffixranges="function(){var" this.settings.sizerangesuffixes)this.settings.sizerangesuffixes.hasownproperty(i)&&t.push(parseint(i,10));return="" t.sort(function(t,i){return="" i<t?1:t<i?-1:0}),t},r.prototype.updatesettings="function(t){this.settings=l.extend({},this.settings,t),this.checkSettings(),this.border=0<=this.settings.border?this.settings.border:this.settings.margins,this.maxRowHeight=this.retrieveMaxRowHeight(),this.suffixRanges=this.retrieveSuffixRanges()},r.prototype.defaults={sizeRangeSuffixes:{},thumbnailPath:void" 0,rowheight:120,maxrowheight:!1,maxrowscount:0,margins:1,border:-1,lastrow:"nojustify",justifythreshold:.9,waitthumbnailsload:!0,captions:!0,cssanimation:!0,imagesanimationduration:500,captionsettings:{animationduration:500,visibleopacity:.7,nonvisibleopacity:0},rel:null,target:null,extension:="" \.[^.\\="" ]+$="" ,refreshtime:200,refreshsensitivity:0,randomize:!1,rtl:!1,sort:!1,filter:!1,selector:"a",imgselector:"=""> img, &gt; a &gt; img, &gt; svg, &gt; a &gt; svg",triggerEvent:function(t){this.$gallery.trigger(t)}},l.fn.justifiedGallery=function(n){return this.each(function(t,i){var e=l(i);e.addClass("justified-gallery");var s=e.data("jg.controller");if(void 0===s){if(null!=n&amp;&amp;"object"!==l.type(n)){if("destroy"===n)return;throw"The argument must be an object"}s=new r(e,l.extend({},r.prototype.defaults,n)),e.data("jg.controller",s)}else if("norewind"===n);else{if("destroy"===n)return void s.destroy();s.updateSettings(n),s.rewind()}s.updateEntries("norewind"===n)&amp;&amp;s.init()})}});</this.buildingrow.entriesbuff.length&&this.flushrow(!0,0<this.settings.maxrowscount&&this.rows===this.settings.maxrowscount),this.isspinneractive()&&this.stoploadingspinneranimation(),this.stopimganalyzerstarter(),this.setgalleryfinalheight(this.galleryheighttoset),this.settings.triggerevent.call(this,t?"jg.resize":"jg.complete")},r.prototype.stopimganalyzerstarter=function(){this.yield.flushed=0,null!==this.imganalyzertimeout&&(cleartimeout(this.imganalyzertimeout),this.imganalyzertimeout=null)},r.prototype.startimganalyzer=function(t){var></i.length?i.eq(t.phase).fadeto(t.timeslot,1):i.eq(t.phase-i.length).fadeto(t.timeslot,0),t.phase=(t.phase+1)%(2*i.length)},t.timeslot)},r.prototype.rewind=function(){this.lastfetchedentry=null,this.lastanalyzedindex=-1,this.offy=this.border,this.rows=0,this.clearbuildingrow()},r.prototype.getselectorwithoutspinner=function(){return></this.buildingrow.entriesbuff.length;e++)n=(s=this.buildingrow.entriesbuff[e]).data("jg.width")></this.rows&&(a=(u=(this.offy-this.border-this.settings.margins*this.rows)></this.buildingrow.entriesbuff.length;e++)s=this.buildingrow.entriesbuff[e],this.settings.cssanimation?s.removeclass("jg-entry-visible"):(s.stop().fadeto(0,.1),s.find("></t.length},r.prototype.onentrymouseenterforcaption=function(t){var></t?t:i,s=0;s<this.suffixranges.length;s++)if(e<=this.suffixranges[s])return>